<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Simple page builder</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dragula/3.7.2/dragula.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-editor/5.23.2/js/medium-editor.min.js"></script>
    <script src="http://mkawczynski07.github.io/medium-editor-list/medium-editor-list.js"></script>
    <script src="http://yabwe.github.io/medium-editor-tables/bower_components/medium-editor-tables/dist/js/medium-editor-tables.js"></script>
</head>
<body>
    <div class="remove">Remove zone</div>

            <div class="one">
                <div class="container-fluid">
                    <div id="drag"></div>
                </div>
            </div>

            <div class="presets">
                <div class="container-fluid" id="presets">
                    <div class="after">
                        <button class="edit-btn"></button>
                        <div class="bg row">
                            <div class="bg col-md-12 editor">1</div>
                        </div>
                    </div>
                    <div class="after">
                        <button class="edit-btn"></button>
                        <div class="bg row">
                            <div class="bg col-md-6 editor">1/2</div>
                            <div class="bg col-md-6 editor">1/2</div>
                        </div>
                    </div>
                    <div class="after">
                        <button class="edit-btn"></button>
                        <div class="bg row">
                            <div class="bg col-md-4 editor">1/3</div>
                            <div class="bg col-md-4 editor">1/3</div>
                            <div class="bg col-md-4 editor">1/3</div>
                        </div>
                    </div>
                    <div class="after">
                        <button class="edit-btn"></button>
                        <div class="bg row">
                            <div class="bg col-md-3 editor">1/4</div>
                            <div class="bg col-md-3 editor">1/4</div>
                            <div class="bg col-md-3 editor">1/4</div>
                            <div class="bg col-md-3 editor">1/4</div>
                        </div>
                    </div>
                    <div class="after">
                        <button class="edit-btn"></button>
                        <div class="bg row">
                            <div class="bg col-md-3 editor">1/4</div>
                            <div class="bg col-md-6 editor">1/2</div>
                            <div class="bg col-md-3 editor">1/4</div>
                        </div>
                    </div>
                    <div class="after">
                        <button class="edit-btn"></button>
                        <div class="bg row">
                            <div class="bg col-md-offset-4 col-md-4 editor">1/3</div>
                        </div>
                    </div>
                    <div class="after">
                        <button class="edit-btn"></button>
                        <div class="bg row">
                            <div class="bg col-md-offset-3 col-md-6 editor">1/2</div>
                        </div>
                    </div>
                    <div class="after">
                        <button class="edit-btn"></button>
                        <div class="bg row">
                            <div class="bg col-md-offset-2 col-md-8 editor">2/3</div>
                        </div>
                    </div>
                    <div class="after">
                        <button class="edit-btn"></button>
                        <div class="bg row">
                            <div class="bg col-md-offset-1 col-md-5 editor">5/12</div>
                            <div class="bg col-md-5 editor">5/12</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="options">
                <h5></h5>
                <hr>
                <form action="" class="form" id="optionsForm">
                    <div class="form-group">
                        <div class="col-md-4">
                            <label for="backgroundColor">Цвет фона</label>
                        </div>
                        <div class="col-md-8">
                            <input type="color" id="backgroundColor" data-unit="" class="input form-control">
                        </div>
                    </div>
                    <h4>Внутренние отступы</h4>
                    <div class="form-group">
                        <div class="col-md-4">
                            <label for="paddingTop">Сверху</label>
                        </div>
                        <div class="col-md-8">
                            <input type="numper" id="paddingTop" data-unit="px" class="input form-control">
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-4">
                            <label for="paddingBottom">Снизу</label>
                        </div>
                        <div class="col-md-8">
                            <input type="numper" id="paddingBottom" data-unit="px" class="input form-control">
                        </div>
                    </div>
                    <h4>Наружние отступы</h4>
                    <div class="form-group">
                        <div class="col-md-4">
                            <label for="marginTop">Сверху</label>
                        </div>
                        <div class="col-md-8">
                            <input type="numper" id="marginTop" data-unit="px" class="input form-control">
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-4">
                            <label for="marginBottom">Снизу</label>
                        </div>
                        <div class="col-md-8">
                            <input type="numper" id="marginBottom" data-unit="px" class="input form-control">
                        </div>
                    </div>
                </form>
                <button id="optionsSave" class="btn btn-success">Close</button>
            </div>
    </div>


<script>


    var drake = dragula({
        containers: [document.getElementById('drag'), document.getElementById('presets')],
        copy: function (el, source) {
            return source === document.getElementById('presets');
        },
        accepts: function (el, target) {
            return target !== document.getElementById('drop')
        },
        removeOnSpill: true
    });

    var idCount = 0;
    drake.on('cloned', function(clone){
        $(clone).attr('id', 'cloned_' + idCount);
        idCount ++;
    });

    drake.on('dragend', function(el){
        var editor = new MediumEditor('#drag .editor', {
            buttonLabels: 'fontawesome',
            extensions: {
                table: new MediumEditorTable({
                    rows: 40,
                    columns: 40
                })
            },
            toolbar: {
                buttons: [
                    'bold',
                    'italic',
                    'underline',
                    'h2',
                    'h3',
                    'justifyLeft',
                    'justifyCenter',
                    'justifyRight',
                    'justifyFull',
                    'unorderedlist',
                    'orderedlist',
                    'image',
                    'html',
                    'removeFormat',
                    'table'
                ],
                static: true,
                sticky: true
            },
        });

        $('.edit-btn').click(function(event) {
            $('.input').each(function () {
                $(this).val('');
            });
            var parent = $(this).parent();
            var options = $('#options');

            options.addClass('active');
            options.find('h5').text(parent.attr('id'));
        });

    });

    $('#optionsSave').click(function(event) {
        $(this).parent().removeClass('active');
    });

    $('.input').on('input', function(e){
        containerId = $('#options h5').text();
        var property = $(this).attr('id');
        var value = $(this).val();
        var unit = $(this).data('unit');
        $('body').find('#' + containerId).css(property, value + unit);
    });


</script>
<link rel="stylesheet" href="http://yabwe.github.io/medium-editor-tables/bower_components/normalize.css/normalize.css">
<link rel="stylesheet" href="main.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dragula/3.7.2/dragula.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/medium-editor/5.23.2/css/medium-editor.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/medium-editor/5.23.2/css/themes/flat.css">
<link rel="stylesheet" href="http://yabwe.github.io/medium-editor-tables/bower_components/medium-editor-tables/dist/css/medium-editor-tables.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</body>
</html>